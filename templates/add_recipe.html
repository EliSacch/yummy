{% extends 'base.html' %}

{% block title %}Yummy - Edit Recipe{% endblock %}

{% block content %}

{% if user.is_authenticated %}
<section class="messages">
    <ul class="messages-list">
        {% for message in messages %}
            <li>
                <p>{{ message }}</p>
            </li>
        {% endfor %}
    </ul>
</section>
<section class="valign-wrapper dark-text">
    <div class="container">
        <!-- Go back button -->
        <div class="go-back">
            <a class="tooltipped" data-position="bottom" data-tooltip="Go back">
                <button class="btn-floating primary-3 light-text">
                    <i class="lmedium material-icons">arrow_back</i>
                </button>
            </a>
        </div>
        <div class="row form-header">
            <div class="col s12">
                <h1 class="subheading">Add Recipe</h1>
            </div>
        </div>

        <!-- Add recipe form -->
        <div class="row">
            <div class="col s12">
                <form class="center recipe_form" id="add_recipe_form" method="post" action="{% url 'add_recipe' %}">
                    {% csrf_token %}

                    {% for field in form %}

                        {% if field.name == "servings" %}
                        <div class="row">
                            <div class="input-field small-input label-left">
                                <label for="{{ field.id_for_label }}">{{ field.label }} {% if field.field.required %}*{% endif %}</label>
                                {{ field }}
                            </div>
                            {{ field.errors }}
                        </div>
                            
                        {% elif field.name == "tags" %}
                        <div class="row">
                            <div class="input-field">
                                {{ field }}
                                <label for="{{ field.id_for_label }}">{{ field.label }} {% if field.field.required %}*{% endif %}<span>(Example: #easy #vegetarian)</span></label>
                                <span id="valid-tags"></span>
                            </div>
                            {{ field.errors }}
                        </div>

                        {% else %}
                        <div class="row">
                            <div class="input-field col s12">
                                {{ field }}
                                <label for="{{ field.id_for_label }}">{{ field.label }} {% if field.field.required %}*{% endif %}</label>
                            </div>
                            {{ field.errors }}
                        </div>

                        {% endif %}
                        
 
                    {% endfor %}

                    {% include 'add_ingredients.html' %}

    

                    <p class="mandatory-fields row">* Mandatory fields</p>

                    <!-- Submit button -->
                    <button class="btn action-btn center" type="submit">Save</button>
                </form>
            </div>
        </div>
    </div>
</section>
{% else %} 

<section>
    <div class="container">
        <h1>Please, <a href="{% url 'account_login' %}">log in</a> to add new recipes.</h1>

        <p><a href="{% url 'home' %}">Go home</a></p>
        
    </div>
</section>

{% endif %}

{% endblock %}
